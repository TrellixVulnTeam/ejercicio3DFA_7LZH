{"ast":null,"code":"import _asyncToGenerator from \"/home/pascuord/Documentos/uoc/masterDesarrolloAplicacionesPaginasWeb/desarrolloFrontEndAvanzado/pec2/ejercicio3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { formatDate } from '@angular/common';\nimport { FormControl, Validators } from '@angular/forms';\nimport { PostDTO } from 'src/app/Models/post.dto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/Services/post.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"src/app/Services/shared.service\";\nimport * as i5 from \"src/app/Services/local-storage.service\";\nimport * as i6 from \"src/app/Services/category.service\";\nimport * as i7 from \"@angular/common\";\n\nfunction PostFormComponent_form_5_div_5_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Title is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostFormComponent_form_5_div_5_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Title can be max 55 characters long. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostFormComponent_form_5_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_5_div_1_div_1_Template, 2, 0, \"div\", 6);\n    i0.ɵɵtemplate(2, PostFormComponent_form_5_div_5_div_1_div_2_Template, 2, 0, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngClass\", \"error\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.title.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.title.errors.maxlength);\n  }\n}\n\nfunction PostFormComponent_form_5_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_5_div_1_Template, 3, 3, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.title.errors && ctx_r1.isValidForm != null && !ctx_r1.isValidForm);\n  }\n}\n\nfunction PostFormComponent_form_5_div_10_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Description is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostFormComponent_form_5_div_10_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Description can be max 255 characters long. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostFormComponent_form_5_div_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_10_div_1_div_1_Template, 2, 0, \"div\", 6);\n    i0.ɵɵtemplate(2, PostFormComponent_form_5_div_10_div_1_div_2_Template, 2, 0, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngClass\", \"error\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.description.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.description.errors.maxlength);\n  }\n}\n\nfunction PostFormComponent_form_5_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_10_div_1_Template, 3, 3, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.description.errors && ctx_r2.isValidForm != null && !ctx_r2.isValidForm);\n  }\n}\n\nfunction PostFormComponent_form_5_div_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Publication date is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostFormComponent_form_5_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_15_div_1_Template, 2, 0, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", \"error\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.publication_date.errors.required);\n  }\n}\n\nfunction PostFormComponent_form_5_option_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const category_r12 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", category_r12.categoryId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r12.title, \" \");\n  }\n}\n\nfunction PostFormComponent_form_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function PostFormComponent_form_5_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.savePost();\n    });\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelementStart(2, \"label\", 4);\n    i0.ɵɵtext(3, \"Title:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 5);\n    i0.ɵɵtemplate(5, PostFormComponent_form_5_div_5_Template, 2, 1, \"div\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\");\n    i0.ɵɵelementStart(7, \"label\", 7);\n    i0.ɵɵtext(8, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 5);\n    i0.ɵɵtemplate(10, PostFormComponent_form_5_div_10_Template, 2, 1, \"div\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\");\n    i0.ɵɵelementStart(12, \"label\", 8);\n    i0.ɵɵtext(13, \"Publication date: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 9);\n    i0.ɵɵtemplate(15, PostFormComponent_form_5_div_15_Template, 2, 2, \"div\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\");\n    i0.ɵɵelementStart(17, \"label\", 11);\n    i0.ɵɵtext(18, \"Choose categories:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"select\", 12);\n    i0.ɵɵtemplate(20, PostFormComponent_form_5_option_20_Template, 2, 2, \"option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"button\", 14);\n    i0.ɵɵtext(22, \"SAVE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.postForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.title.errors);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.description.errors);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.publication_date);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.publication_date.errors && ctx_r0.isValidForm != null && !ctx_r0.isValidForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.categories);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.categoriesList);\n  }\n}\n\nexport class PostFormComponent {\n  constructor(activatedRoute, postService, formBuilder, router, sharedService, localStorageService, categoryService) {\n    this.activatedRoute = activatedRoute;\n    this.postService = postService;\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.sharedService = sharedService;\n    this.localStorageService = localStorageService;\n    this.categoryService = categoryService;\n    this.isValidForm = null;\n    this.postId = this.activatedRoute.snapshot.paramMap.get('id');\n    this.post = new PostDTO('', '', 0, 0, new Date());\n    this.isUpdateMode = false;\n    this.validRequest = false;\n    this.title = new FormControl(this.post.title, [Validators.required, Validators.maxLength(55)]);\n    this.description = new FormControl(this.post.description, [Validators.required, Validators.maxLength(255)]);\n    this.publication_date = new FormControl(formatDate(this.post.publication_date, 'yyyy-MM-dd', 'en'), [Validators.required]);\n    this.categories = new FormControl([]); // get categories by user and load multi select\n\n    this.loadCategories();\n    this.postForm = this.formBuilder.group({\n      title: this.title,\n      description: this.description,\n      publication_date: this.publication_date,\n      categories: this.categories\n    });\n  }\n\n  loadCategories() {\n    let errorResponse;\n    const userId = this.localStorageService.get('user_id');\n\n    if (userId) {\n      try {\n        /* this.categoriesList = await this.categoryService.getCategoriesByUserId(\n          userId\n        ); */\n        this.categoryService.getCategoriesByUserId(userId).subscribe(categoriesResult => {\n          this.categoriesList = categoriesResult;\n        });\n      } catch (error) {\n        errorResponse = error.error;\n        this.sharedService.errorLog(errorResponse);\n      }\n    }\n  }\n\n  ngOnInit() {\n    let errorResponse; // update\n\n    if (this.postId) {\n      this.isUpdateMode = true;\n      /* try {\n        this.post = await this.postService.getPostById(this.postId);\n               this.title.setValue(this.post.title);\n               this.description.setValue(this.post.description);\n               this.publication_date.setValue(\n          formatDate(this.post.publication_date, 'yyyy-MM-dd', 'en')\n        );\n               let categoriesIds: string[] = [];\n        this.post.categories.forEach((cat: CategoryDTO) => {\n          categoriesIds.push(cat.categoryId);\n        });\n               this.categories.setValue(categoriesIds);\n               this.postForm = this.formBuilder.group({\n          title: this.title,\n          description: this.description,\n          publication_date: this.publication_date,\n          categories: this.categories,\n        });\n      } catch (error: any) {\n        errorResponse = error.error;\n        this.sharedService.errorLog(errorResponse);\n      } */\n\n      this.postService.getPostById(this.postId).subscribe(postResult => {\n        this.post = postResult;\n        this.title.setValue(this.post.title);\n        this.description.setValue(this.post.description);\n        this.publication_date.setValue(formatDate(this.post.publication_date, 'yyyy-MM-dd', 'en'));\n        let categoriesIds = [];\n        this.post.categories.forEach(cat => {\n          categoriesIds.push(cat.categoryId);\n        });\n        this.categories.setValue(categoriesIds);\n        this.postForm = this.formBuilder.group({\n          title: this.title,\n          description: this.description,\n          publication_date: this.publication_date,\n          categories: this.categories\n        });\n      }, error => {\n        errorResponse = error.error;\n        this.sharedService.errorLog(errorResponse);\n      });\n    }\n  }\n\n  editPost() {\n    let errorResponse;\n    let responseOK = false;\n\n    if (this.postId) {\n      const userId = this.localStorageService.get('user_id');\n\n      if (userId) {\n        this.post.userId = userId;\n        /* try {\n          await this.postService.updatePost(this.postId, this.post);\n          responseOK = true;\n        } catch (error: any) {\n          errorResponse = error.error;\n          this.sharedService.errorLog(errorResponse);\n        }\n                 await this.sharedService.managementToast(\n          'postFeedback',\n          responseOK,\n          errorResponse\n        );\n                 if (responseOK) {\n          // Reset the form\n          //this.registerForm.reset();\n          // After reset form we set birthDate to today again (is an example)\n          //this.birth_date.setValue(formatDate(new Date(), 'yyyy-MM-dd', 'en'));\n          this.router.navigateByUrl('posts');\n        } */\n\n        this.postService.updatePost(this.postId, this.post).subscribe(postResult => {\n          responseOK = true;\n        }, error => {\n          errorResponse = error.error;\n          this.sharedService.errorLog(errorResponse);\n        }, () => {\n          this.sharedService.managementToast('postFeedback', responseOK, errorResponse);\n\n          if (responseOK) {\n            this.router.navigateByUrl('posts');\n          }\n        });\n      }\n    }\n\n    return responseOK;\n  }\n\n  createPost() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let errorResponse;\n      let responseOK = false;\n\n      const userId = _this.localStorageService.get('user_id');\n\n      if (userId) {\n        _this.post.userId = userId;\n        /* try {\n          await this.postService.createPost(this.post);\n          responseOK = true;\n        } catch (error: any) {\n          errorResponse = error.error;\n          this.sharedService.errorLog(errorResponse);\n        }\n               await this.sharedService.managementToast(\n          'postFeedback',\n          responseOK,\n          errorResponse\n        );\n               if (responseOK) {\n          // Reset the form\n          //this.registerForm.reset();\n          // After reset form we set birthDate to today again (is an example)\n          //this.birth_date.setValue(formatDate(new Date(), 'yyyy-MM-dd', 'en'));\n          this.router.navigateByUrl('posts');\n        } */\n\n        _this.postService.createPost(_this.post).subscribe(postResult => {\n          responseOK = true;\n        }, error => {\n          errorResponse = error.error;\n\n          _this.sharedService.errorLog(errorResponse);\n        }, () => {\n          _this.sharedService.managementToast('postFeedback', responseOK, errorResponse);\n\n          if (responseOK) {\n            _this.router.navigateByUrl('posts');\n          }\n        });\n      }\n\n      return responseOK;\n    })();\n  }\n\n  savePost() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.isValidForm = false;\n\n      if (_this2.postForm.invalid) {\n        return;\n      }\n\n      _this2.isValidForm = true;\n      _this2.post = _this2.postForm.value;\n\n      if (_this2.isUpdateMode) {\n        _this2.validRequest = yield _this2.editPost();\n      } else {\n        _this2.validRequest = yield _this2.createPost();\n      }\n    })();\n  }\n\n}\n\nPostFormComponent.ɵfac = function PostFormComponent_Factory(t) {\n  return new (t || PostFormComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PostService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i4.SharedService), i0.ɵɵdirectiveInject(i5.LocalStorageService), i0.ɵɵdirectiveInject(i6.CategoryService));\n};\n\nPostFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PostFormComponent,\n  selectors: [[\"app-post-form\"]],\n  decls: 6,\n  vars: 1,\n  consts: [[2, \"margin-left\", \"auto\", \"margin-right\", \"auto\"], [\"id\", \"postFeedback\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [\"for\", \"title\"], [\"type\", \"text\", 3, \"formControl\"], [4, \"ngIf\"], [\"for\", \"description\"], [\"for\", \"publicationDate\"], [\"type\", \"date\", 3, \"formControl\"], [3, \"ngClass\", 4, \"ngIf\"], [\"for\", \"categories\"], [\"multiple\", \"\", 3, \"formControl\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\"], [3, \"ngClass\"], [3, \"ngValue\"]],\n  template: function PostFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"p\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\");\n      i0.ɵɵelementStart(3, \"h1\");\n      i0.ɵɵtext(4, \"Post form\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, PostFormComponent_form_5_Template, 23, 9, \"form\", 2);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.postForm);\n    }\n  },\n  directives: [i7.NgIf, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlDirective, i3.SelectMultipleControlValueAccessor, i7.NgForOf, i7.NgClass, i3.NgSelectOption, i3.ɵNgSelectMultipleOption],\n  styles: [\".error[_ngcontent-%COMP%] {\\n  color: red;\\n}\\n\\n#postFeedback[_ngcontent-%COMP%] {\\n  visibility: hidden;\\n  min-width: 250px;\\n  color: #fff;\\n  text-align: center;\\n  border-radius: 10px;\\n  padding: 16px;\\n  z-index: 1;\\n  font-size: 14px;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n#postFeedback.requestOk[_ngcontent-%COMP%] {\\n  background-color: green;\\n}\\n\\n#postFeedback.requestKo[_ngcontent-%COMP%] {\\n  background-color: red;\\n}\\n\\n#postFeedback.show[_ngcontent-%COMP%] {\\n  visibility: visible;\\n  -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;\\n  animation: fadein 0.5s, fadeout 0.5s 2.5s;\\n}\\n\\n@-webkit-keyframes fadein {\\n  from {\\n    bottom: 0;\\n    opacity: 0;\\n  }\\n  to {\\n    bottom: 30px;\\n    opacity: 1;\\n  }\\n}\\n\\n@keyframes fadein {\\n  from {\\n    bottom: 0;\\n    opacity: 0;\\n  }\\n  to {\\n    bottom: 30px;\\n    opacity: 1;\\n  }\\n}\\n\\n@-webkit-keyframes fadeout {\\n  from {\\n    bottom: 30px;\\n    opacity: 1;\\n  }\\n  to {\\n    bottom: 0;\\n    opacity: 0;\\n  }\\n}\\n\\n@keyframes fadeout {\\n  from {\\n    bottom: 30px;\\n    opacity: 1;\\n  }\\n  to {\\n    bottom: 0;\\n    opacity: 0;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QtZm9ybS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFVBQUE7QUFDRjs7QUFFQTtFQUNFLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtFQUNBLGFBQUE7RUFDQSxVQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFFQTtFQUNFLHVCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxxQkFBQTtBQUNGOztBQUVBO0VBQ0UsbUJBQUE7RUFDQSxpREFBQTtFQUNBLHlDQUFBO0FBQ0Y7O0FBRUE7RUFDRTtJQUNFLFNBQUE7SUFDQSxVQUFBO0VBQ0Y7RUFDQTtJQUNFLFlBQUE7SUFDQSxVQUFBO0VBQ0Y7QUFDRjs7QUFFQTtFQUNFO0lBQ0UsU0FBQTtJQUNBLFVBQUE7RUFBRjtFQUVBO0lBQ0UsWUFBQTtJQUNBLFVBQUE7RUFBRjtBQUNGOztBQUdBO0VBQ0U7SUFDRSxZQUFBO0lBQ0EsVUFBQTtFQURGO0VBR0E7SUFDRSxTQUFBO0lBQ0EsVUFBQTtFQURGO0FBQ0Y7O0FBSUE7RUFDRTtJQUNFLFlBQUE7SUFDQSxVQUFBO0VBRkY7RUFJQTtJQUNFLFNBQUE7SUFDQSxVQUFBO0VBRkY7QUFDRiIsImZpbGUiOiJwb3N0LWZvcm0uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZXJyb3Ige1xyXG4gIGNvbG9yOiByZWQ7XHJcbn1cclxuXHJcbiNwb3N0RmVlZGJhY2sge1xyXG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcclxuICBtaW4td2lkdGg6IDI1MHB4O1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gIHBhZGRpbmc6IDE2cHg7XHJcbiAgei1pbmRleDogMTtcclxuICBmb250LXNpemU6IDE0cHg7XHJcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xyXG59XHJcblxyXG4jcG9zdEZlZWRiYWNrLnJlcXVlc3RPayB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogZ3JlZW47XHJcbn1cclxuXHJcbiNwb3N0RmVlZGJhY2sucmVxdWVzdEtvIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XHJcbn1cclxuXHJcbiNwb3N0RmVlZGJhY2suc2hvdyB7XHJcbiAgdmlzaWJpbGl0eTogdmlzaWJsZTtcclxuICAtd2Via2l0LWFuaW1hdGlvbjogZmFkZWluIDAuNXMsIGZhZGVvdXQgMC41cyAyLjVzO1xyXG4gIGFuaW1hdGlvbjogZmFkZWluIDAuNXMsIGZhZGVvdXQgMC41cyAyLjVzO1xyXG59XHJcblxyXG5ALXdlYmtpdC1rZXlmcmFtZXMgZmFkZWluIHtcclxuICBmcm9tIHtcclxuICAgIGJvdHRvbTogMDtcclxuICAgIG9wYWNpdHk6IDA7XHJcbiAgfVxyXG4gIHRvIHtcclxuICAgIGJvdHRvbTogMzBweDtcclxuICAgIG9wYWNpdHk6IDE7XHJcbiAgfVxyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIGZhZGVpbiB7XHJcbiAgZnJvbSB7XHJcbiAgICBib3R0b206IDA7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG4gIH1cclxuICB0byB7XHJcbiAgICBib3R0b206IDMwcHg7XHJcbiAgICBvcGFjaXR5OiAxO1xyXG4gIH1cclxufVxyXG5cclxuQC13ZWJraXQta2V5ZnJhbWVzIGZhZGVvdXQge1xyXG4gIGZyb20ge1xyXG4gICAgYm90dG9tOiAzMHB4O1xyXG4gICAgb3BhY2l0eTogMTtcclxuICB9XHJcbiAgdG8ge1xyXG4gICAgYm90dG9tOiAwO1xyXG4gICAgb3BhY2l0eTogMDtcclxuICB9XHJcbn1cclxuXHJcbkBrZXlmcmFtZXMgZmFkZW91dCB7XHJcbiAgZnJvbSB7XHJcbiAgICBib3R0b206IDMwcHg7XHJcbiAgICBvcGFjaXR5OiAxO1xyXG4gIH1cclxuICB0byB7XHJcbiAgICBib3R0b206IDA7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG4gIH1cclxufVxyXG4iXX0= */\"]\n});","map":{"version":3,"sources":["/home/pascuord/Documentos/uoc/masterDesarrolloAplicacionesPaginasWeb/desarrolloFrontEndAvanzado/pec2/ejercicio3/src/app/posts/post-form/post-form.component.ts"],"names":["formatDate","FormControl","Validators","PostDTO","i0","i1","i2","i3","i4","i5","i6","i7","PostFormComponent_form_5_div_5_div_1_div_1_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","PostFormComponent_form_5_div_5_div_1_div_2_Template","PostFormComponent_form_5_div_5_div_1_Template","ɵɵtemplate","ctx_r5","ɵɵnextContext","ɵɵproperty","ɵɵadvance","title","errors","required","maxlength","PostFormComponent_form_5_div_5_Template","ctx_r1","isValidForm","PostFormComponent_form_5_div_10_div_1_div_1_Template","PostFormComponent_form_5_div_10_div_1_div_2_Template","PostFormComponent_form_5_div_10_div_1_Template","ctx_r8","description","PostFormComponent_form_5_div_10_Template","ctx_r2","PostFormComponent_form_5_div_15_div_1_Template","PostFormComponent_form_5_div_15_Template","ctx_r3","publication_date","PostFormComponent_form_5_option_20_Template","category_r12","$implicit","categoryId","ɵɵtextInterpolate1","PostFormComponent_form_5_Template","_r14","ɵɵgetCurrentView","ɵɵlistener","PostFormComponent_form_5_Template_form_ngSubmit_0_listener","ɵɵrestoreView","ctx_r13","savePost","ɵɵelement","ctx_r0","postForm","categories","categoriesList","PostFormComponent","constructor","activatedRoute","postService","formBuilder","router","sharedService","localStorageService","categoryService","postId","snapshot","paramMap","get","post","Date","isUpdateMode","validRequest","maxLength","loadCategories","group","errorResponse","userId","getCategoriesByUserId","subscribe","categoriesResult","error","errorLog","ngOnInit","getPostById","postResult","setValue","categoriesIds","forEach","cat","push","editPost","responseOK","updatePost","managementToast","navigateByUrl","createPost","invalid","value","ɵfac","PostFormComponent_Factory","t","ɵɵdirectiveInject","ActivatedRoute","PostService","FormBuilder","Router","SharedService","LocalStorageService","CategoryService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","PostFormComponent_Template","directives","NgIf","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","DefaultValueAccessor","NgControlStatus","FormControlDirective","SelectMultipleControlValueAccessor","NgForOf","NgClass","NgSelectOption","ɵNgSelectMultipleOption","styles"],"mappings":"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","sourcesContent":["import { formatDate } from '@angular/common';\nimport { FormControl, Validators, } from '@angular/forms';\nimport { PostDTO } from 'src/app/Models/post.dto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/Services/post.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"src/app/Services/shared.service\";\nimport * as i5 from \"src/app/Services/local-storage.service\";\nimport * as i6 from \"src/app/Services/category.service\";\nimport * as i7 from \"@angular/common\";\nfunction PostFormComponent_form_5_div_5_div_1_div_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Title is required\");\n    i0.ɵɵelementEnd();\n} }\nfunction PostFormComponent_form_5_div_5_div_1_div_2_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Title can be max 55 characters long. \");\n    i0.ɵɵelementEnd();\n} }\nfunction PostFormComponent_form_5_div_5_div_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_5_div_1_div_1_Template, 2, 0, \"div\", 6);\n    i0.ɵɵtemplate(2, PostFormComponent_form_5_div_5_div_1_div_2_Template, 2, 0, \"div\", 6);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngClass\", \"error\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.title.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.title.errors.maxlength);\n} }\nfunction PostFormComponent_form_5_div_5_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_5_div_1_Template, 3, 3, \"div\", 10);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.title.errors && ctx_r1.isValidForm != null && !ctx_r1.isValidForm);\n} }\nfunction PostFormComponent_form_5_div_10_div_1_div_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Description is required\");\n    i0.ɵɵelementEnd();\n} }\nfunction PostFormComponent_form_5_div_10_div_1_div_2_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Description can be max 255 characters long. \");\n    i0.ɵɵelementEnd();\n} }\nfunction PostFormComponent_form_5_div_10_div_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_10_div_1_div_1_Template, 2, 0, \"div\", 6);\n    i0.ɵɵtemplate(2, PostFormComponent_form_5_div_10_div_1_div_2_Template, 2, 0, \"div\", 6);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngClass\", \"error\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.description.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.description.errors.maxlength);\n} }\nfunction PostFormComponent_form_5_div_10_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_10_div_1_Template, 3, 3, \"div\", 10);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.description.errors && ctx_r2.isValidForm != null && !ctx_r2.isValidForm);\n} }\nfunction PostFormComponent_form_5_div_15_div_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Publication date is required \");\n    i0.ɵɵelementEnd();\n} }\nfunction PostFormComponent_form_5_div_15_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_15_div_1_Template, 2, 0, \"div\", 6);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", \"error\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.publication_date.errors.required);\n} }\nfunction PostFormComponent_form_5_option_20_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const category_r12 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", category_r12.categoryId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r12.title, \" \");\n} }\nfunction PostFormComponent_form_5_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function PostFormComponent_form_5_Template_form_ngSubmit_0_listener() { i0.ɵɵrestoreView(_r14); const ctx_r13 = i0.ɵɵnextContext(); return ctx_r13.savePost(); });\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelementStart(2, \"label\", 4);\n    i0.ɵɵtext(3, \"Title:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 5);\n    i0.ɵɵtemplate(5, PostFormComponent_form_5_div_5_Template, 2, 1, \"div\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\");\n    i0.ɵɵelementStart(7, \"label\", 7);\n    i0.ɵɵtext(8, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 5);\n    i0.ɵɵtemplate(10, PostFormComponent_form_5_div_10_Template, 2, 1, \"div\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\");\n    i0.ɵɵelementStart(12, \"label\", 8);\n    i0.ɵɵtext(13, \"Publication date: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 9);\n    i0.ɵɵtemplate(15, PostFormComponent_form_5_div_15_Template, 2, 2, \"div\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\");\n    i0.ɵɵelementStart(17, \"label\", 11);\n    i0.ɵɵtext(18, \"Choose categories:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"select\", 12);\n    i0.ɵɵtemplate(20, PostFormComponent_form_5_option_20_Template, 2, 2, \"option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"button\", 14);\n    i0.ɵɵtext(22, \"SAVE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.postForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.title.errors);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.description.errors);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.publication_date);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.publication_date.errors && ctx_r0.isValidForm != null && !ctx_r0.isValidForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.categories);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.categoriesList);\n} }\nexport class PostFormComponent {\n    constructor(activatedRoute, postService, formBuilder, router, sharedService, localStorageService, categoryService) {\n        this.activatedRoute = activatedRoute;\n        this.postService = postService;\n        this.formBuilder = formBuilder;\n        this.router = router;\n        this.sharedService = sharedService;\n        this.localStorageService = localStorageService;\n        this.categoryService = categoryService;\n        this.isValidForm = null;\n        this.postId = this.activatedRoute.snapshot.paramMap.get('id');\n        this.post = new PostDTO('', '', 0, 0, new Date());\n        this.isUpdateMode = false;\n        this.validRequest = false;\n        this.title = new FormControl(this.post.title, [\n            Validators.required,\n            Validators.maxLength(55),\n        ]);\n        this.description = new FormControl(this.post.description, [\n            Validators.required,\n            Validators.maxLength(255),\n        ]);\n        this.publication_date = new FormControl(formatDate(this.post.publication_date, 'yyyy-MM-dd', 'en'), [Validators.required]);\n        this.categories = new FormControl([]);\n        // get categories by user and load multi select\n        this.loadCategories();\n        this.postForm = this.formBuilder.group({\n            title: this.title,\n            description: this.description,\n            publication_date: this.publication_date,\n            categories: this.categories,\n        });\n    }\n    loadCategories() {\n        let errorResponse;\n        const userId = this.localStorageService.get('user_id');\n        if (userId) {\n            try {\n                /* this.categoriesList = await this.categoryService.getCategoriesByUserId(\n                  userId\n                ); */\n                this.categoryService\n                    .getCategoriesByUserId(userId)\n                    .subscribe((categoriesResult) => {\n                    this.categoriesList = categoriesResult;\n                });\n            }\n            catch (error) {\n                errorResponse = error.error;\n                this.sharedService.errorLog(errorResponse);\n            }\n        }\n    }\n    ngOnInit() {\n        let errorResponse;\n        // update\n        if (this.postId) {\n            this.isUpdateMode = true;\n            /* try {\n              this.post = await this.postService.getPostById(this.postId);\n      \n              this.title.setValue(this.post.title);\n      \n              this.description.setValue(this.post.description);\n      \n              this.publication_date.setValue(\n                formatDate(this.post.publication_date, 'yyyy-MM-dd', 'en')\n              );\n      \n              let categoriesIds: string[] = [];\n              this.post.categories.forEach((cat: CategoryDTO) => {\n                categoriesIds.push(cat.categoryId);\n              });\n      \n              this.categories.setValue(categoriesIds);\n      \n              this.postForm = this.formBuilder.group({\n                title: this.title,\n                description: this.description,\n                publication_date: this.publication_date,\n                categories: this.categories,\n              });\n            } catch (error: any) {\n              errorResponse = error.error;\n              this.sharedService.errorLog(errorResponse);\n            } */\n            this.postService.getPostById(this.postId).subscribe((postResult) => {\n                this.post = postResult;\n                this.title.setValue(this.post.title);\n                this.description.setValue(this.post.description);\n                this.publication_date.setValue(formatDate(this.post.publication_date, 'yyyy-MM-dd', 'en'));\n                let categoriesIds = [];\n                this.post.categories.forEach((cat) => {\n                    categoriesIds.push(cat.categoryId);\n                });\n                this.categories.setValue(categoriesIds);\n                this.postForm = this.formBuilder.group({\n                    title: this.title,\n                    description: this.description,\n                    publication_date: this.publication_date,\n                    categories: this.categories,\n                });\n            }, (error) => {\n                errorResponse = error.error;\n                this.sharedService.errorLog(errorResponse);\n            });\n        }\n    }\n    editPost() {\n        let errorResponse;\n        let responseOK = false;\n        if (this.postId) {\n            const userId = this.localStorageService.get('user_id');\n            if (userId) {\n                this.post.userId = userId;\n                /* try {\n                  await this.postService.updatePost(this.postId, this.post);\n                  responseOK = true;\n                } catch (error: any) {\n                  errorResponse = error.error;\n                  this.sharedService.errorLog(errorResponse);\n                }\n        \n                await this.sharedService.managementToast(\n                  'postFeedback',\n                  responseOK,\n                  errorResponse\n                );\n        \n                if (responseOK) {\n                  // Reset the form\n                  //this.registerForm.reset();\n                  // After reset form we set birthDate to today again (is an example)\n                  //this.birth_date.setValue(formatDate(new Date(), 'yyyy-MM-dd', 'en'));\n                  this.router.navigateByUrl('posts');\n                } */\n                this.postService.updatePost(this.postId, this.post).subscribe((postResult) => {\n                    responseOK = true;\n                }, (error) => {\n                    errorResponse = error.error;\n                    this.sharedService.errorLog(errorResponse);\n                }, () => {\n                    this.sharedService.managementToast('postFeedback', responseOK, errorResponse);\n                    if (responseOK) {\n                        this.router.navigateByUrl('posts');\n                    }\n                });\n            }\n        }\n        return responseOK;\n    }\n    async createPost() {\n        let errorResponse;\n        let responseOK = false;\n        const userId = this.localStorageService.get('user_id');\n        if (userId) {\n            this.post.userId = userId;\n            /* try {\n              await this.postService.createPost(this.post);\n              responseOK = true;\n            } catch (error: any) {\n              errorResponse = error.error;\n              this.sharedService.errorLog(errorResponse);\n            }\n      \n            await this.sharedService.managementToast(\n              'postFeedback',\n              responseOK,\n              errorResponse\n            );\n      \n            if (responseOK) {\n              // Reset the form\n              //this.registerForm.reset();\n              // After reset form we set birthDate to today again (is an example)\n              //this.birth_date.setValue(formatDate(new Date(), 'yyyy-MM-dd', 'en'));\n              this.router.navigateByUrl('posts');\n            } */\n            this.postService.createPost(this.post).subscribe((postResult) => {\n                responseOK = true;\n            }, (error) => {\n                errorResponse = error.error;\n                this.sharedService.errorLog(errorResponse);\n            }, () => {\n                this.sharedService.managementToast('postFeedback', responseOK, errorResponse);\n                if (responseOK) {\n                    this.router.navigateByUrl('posts');\n                }\n            });\n        }\n        return responseOK;\n    }\n    async savePost() {\n        this.isValidForm = false;\n        if (this.postForm.invalid) {\n            return;\n        }\n        this.isValidForm = true;\n        this.post = this.postForm.value;\n        if (this.isUpdateMode) {\n            this.validRequest = await this.editPost();\n        }\n        else {\n            this.validRequest = await this.createPost();\n        }\n    }\n}\nPostFormComponent.ɵfac = function PostFormComponent_Factory(t) { return new (t || PostFormComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PostService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i4.SharedService), i0.ɵɵdirectiveInject(i5.LocalStorageService), i0.ɵɵdirectiveInject(i6.CategoryService)); };\nPostFormComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PostFormComponent, selectors: [[\"app-post-form\"]], decls: 6, vars: 1, consts: [[2, \"margin-left\", \"auto\", \"margin-right\", \"auto\"], [\"id\", \"postFeedback\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [\"for\", \"title\"], [\"type\", \"text\", 3, \"formControl\"], [4, \"ngIf\"], [\"for\", \"description\"], [\"for\", \"publicationDate\"], [\"type\", \"date\", 3, \"formControl\"], [3, \"ngClass\", 4, \"ngIf\"], [\"for\", \"categories\"], [\"multiple\", \"\", 3, \"formControl\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\"], [3, \"ngClass\"], [3, \"ngValue\"]], template: function PostFormComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"p\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\");\n        i0.ɵɵelementStart(3, \"h1\");\n        i0.ɵɵtext(4, \"Post form\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(5, PostFormComponent_form_5_Template, 23, 9, \"form\", 2);\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.postForm);\n    } }, directives: [i7.NgIf, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlDirective, i3.SelectMultipleControlValueAccessor, i7.NgForOf, i7.NgClass, i3.NgSelectOption, i3.ɵNgSelectMultipleOption], styles: [\".error[_ngcontent-%COMP%] {\\n  color: red;\\n}\\n\\n#postFeedback[_ngcontent-%COMP%] {\\n  visibility: hidden;\\n  min-width: 250px;\\n  color: #fff;\\n  text-align: center;\\n  border-radius: 10px;\\n  padding: 16px;\\n  z-index: 1;\\n  font-size: 14px;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n#postFeedback.requestOk[_ngcontent-%COMP%] {\\n  background-color: green;\\n}\\n\\n#postFeedback.requestKo[_ngcontent-%COMP%] {\\n  background-color: red;\\n}\\n\\n#postFeedback.show[_ngcontent-%COMP%] {\\n  visibility: visible;\\n  -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;\\n  animation: fadein 0.5s, fadeout 0.5s 2.5s;\\n}\\n\\n@-webkit-keyframes fadein {\\n  from {\\n    bottom: 0;\\n    opacity: 0;\\n  }\\n  to {\\n    bottom: 30px;\\n    opacity: 1;\\n  }\\n}\\n\\n@keyframes fadein {\\n  from {\\n    bottom: 0;\\n    opacity: 0;\\n  }\\n  to {\\n    bottom: 30px;\\n    opacity: 1;\\n  }\\n}\\n\\n@-webkit-keyframes fadeout {\\n  from {\\n    bottom: 30px;\\n    opacity: 1;\\n  }\\n  to {\\n    bottom: 0;\\n    opacity: 0;\\n  }\\n}\\n\\n@keyframes fadeout {\\n  from {\\n    bottom: 30px;\\n    opacity: 1;\\n  }\\n  to {\\n    bottom: 0;\\n    opacity: 0;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QtZm9ybS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFVBQUE7QUFDRjs7QUFFQTtFQUNFLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtFQUNBLGFBQUE7RUFDQSxVQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFFQTtFQUNFLHVCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxxQkFBQTtBQUNGOztBQUVBO0VBQ0UsbUJBQUE7RUFDQSxpREFBQTtFQUNBLHlDQUFBO0FBQ0Y7O0FBRUE7RUFDRTtJQUNFLFNBQUE7SUFDQSxVQUFBO0VBQ0Y7RUFDQTtJQUNFLFlBQUE7SUFDQSxVQUFBO0VBQ0Y7QUFDRjs7QUFFQTtFQUNFO0lBQ0UsU0FBQTtJQUNBLFVBQUE7RUFBRjtFQUVBO0lBQ0UsWUFBQTtJQUNBLFVBQUE7RUFBRjtBQUNGOztBQUdBO0VBQ0U7SUFDRSxZQUFBO0lBQ0EsVUFBQTtFQURGO0VBR0E7SUFDRSxTQUFBO0lBQ0EsVUFBQTtFQURGO0FBQ0Y7O0FBSUE7RUFDRTtJQUNFLFlBQUE7SUFDQSxVQUFBO0VBRkY7RUFJQTtJQUNFLFNBQUE7SUFDQSxVQUFBO0VBRkY7QUFDRiIsImZpbGUiOiJwb3N0LWZvcm0uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZXJyb3Ige1xyXG4gIGNvbG9yOiByZWQ7XHJcbn1cclxuXHJcbiNwb3N0RmVlZGJhY2sge1xyXG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcclxuICBtaW4td2lkdGg6IDI1MHB4O1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gIHBhZGRpbmc6IDE2cHg7XHJcbiAgei1pbmRleDogMTtcclxuICBmb250LXNpemU6IDE0cHg7XHJcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xyXG59XHJcblxyXG4jcG9zdEZlZWRiYWNrLnJlcXVlc3RPayB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogZ3JlZW47XHJcbn1cclxuXHJcbiNwb3N0RmVlZGJhY2sucmVxdWVzdEtvIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XHJcbn1cclxuXHJcbiNwb3N0RmVlZGJhY2suc2hvdyB7XHJcbiAgdmlzaWJpbGl0eTogdmlzaWJsZTtcclxuICAtd2Via2l0LWFuaW1hdGlvbjogZmFkZWluIDAuNXMsIGZhZGVvdXQgMC41cyAyLjVzO1xyXG4gIGFuaW1hdGlvbjogZmFkZWluIDAuNXMsIGZhZGVvdXQgMC41cyAyLjVzO1xyXG59XHJcblxyXG5ALXdlYmtpdC1rZXlmcmFtZXMgZmFkZWluIHtcclxuICBmcm9tIHtcclxuICAgIGJvdHRvbTogMDtcclxuICAgIG9wYWNpdHk6IDA7XHJcbiAgfVxyXG4gIHRvIHtcclxuICAgIGJvdHRvbTogMzBweDtcclxuICAgIG9wYWNpdHk6IDE7XHJcbiAgfVxyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIGZhZGVpbiB7XHJcbiAgZnJvbSB7XHJcbiAgICBib3R0b206IDA7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG4gIH1cclxuICB0byB7XHJcbiAgICBib3R0b206IDMwcHg7XHJcbiAgICBvcGFjaXR5OiAxO1xyXG4gIH1cclxufVxyXG5cclxuQC13ZWJraXQta2V5ZnJhbWVzIGZhZGVvdXQge1xyXG4gIGZyb20ge1xyXG4gICAgYm90dG9tOiAzMHB4O1xyXG4gICAgb3BhY2l0eTogMTtcclxuICB9XHJcbiAgdG8ge1xyXG4gICAgYm90dG9tOiAwO1xyXG4gICAgb3BhY2l0eTogMDtcclxuICB9XHJcbn1cclxuXHJcbkBrZXlmcmFtZXMgZmFkZW91dCB7XHJcbiAgZnJvbSB7XHJcbiAgICBib3R0b206IDMwcHg7XHJcbiAgICBvcGFjaXR5OiAxO1xyXG4gIH1cclxuICB0byB7XHJcbiAgICBib3R0b206IDA7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG4gIH1cclxufVxyXG4iXX0= */\"] });\n"]},"metadata":{},"sourceType":"module"}