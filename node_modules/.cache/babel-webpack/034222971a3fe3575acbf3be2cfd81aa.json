{"ast":null,"code":"import { loadPosts } from \"src/app/posts/actions\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/post.service\";\nimport * as i2 from \"src/app/Services/local-storage.service\";\nimport * as i3 from \"src/app/Services/shared.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"src/app/Services/header-menus.service\";\nimport * as i6 from \"@ngrx/store\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"../../Pipes/format-date.pipe\";\n\nconst _c0 = function (a0) {\n  return {\n    \"background-color\": a0\n  };\n};\n\nfunction HomeComponent_div_3_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const category_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(2, _c0, category_r4.css_color));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r4.title, \" \");\n  }\n}\n\nfunction HomeComponent_div_3_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_3_div_18_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const post_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.like(post_r1.postId);\n    });\n    i0.ɵɵtext(2, \"Like\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_3_div_18_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const post_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.dislike(post_r1.postId);\n    });\n    i0.ɵɵtext(4, \"Dislike\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"div\", 3);\n    i0.ɵɵelementStart(2, \"div\");\n    i0.ɵɵtemplate(3, HomeComponent_div_3_span_3_Template, 2, 4, \"span\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h4\");\n    i0.ɵɵelementStart(5, \"b\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"formatDate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"p\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(18, HomeComponent_div_3_div_18_Template, 5, 0, \"div\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const post_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", post_r1.categories);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Title: \", post_r1.title, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Description: \", post_r1.description, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Likes: \", post_r1.num_likes, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Dislikes: \", post_r1.num_dislikes, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Publication date: \", i0.ɵɵpipeBind2(15, 8, post_r1.publication_date, 3), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Published by: \", post_r1.userAlias, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.showButtons);\n  }\n}\n\nexport class HomeComponent {\n  constructor(postService, localStorageService, sharedService, router, headerMenusService, store) {\n    this.postService = postService;\n    this.localStorageService = localStorageService;\n    this.sharedService = sharedService;\n    this.router = router;\n    this.headerMenusService = headerMenusService;\n    this.store = store;\n    this.showButtons = false; //this.loadPosts();\n  }\n\n  ngOnInit() {\n    /* this.headerMenusService.headerManagement.subscribe(\n      (headerInfo: HeaderMenus) => {\n        if (headerInfo) {\n          this.showButtons = headerInfo.showAuthSection;\n        }\n      }\n    ); */\n    this.store.select(\"postsApp\").subscribe(posts => {\n      this.posts = posts.posts;\n    });\n    this.store.dispatch(loadPosts()); //TODO<-----Falta comprobar la variable userid\n\n    /* this.store.select(\"auth\").subscribe((authResponse)=>{\n      const userId = authResponse.credentials.user_id;\n      console.log(\"UserId: \" + userId);\n    });\n         this.store.select(\"posts\").subscribe((postsResponse) => {\n      this.posts = postsResponse.posts;\n    }); */\n  }\n  /* private loadPosts() {\n     let errorResponse: any;\n    const userId = this.localStorageService.get('user_id');\n    if (userId) {\n      this.showButtons = true;\n    }\n    \n    this.postService.getPosts().subscribe(\n      (postsResults) => {\n        this.posts = postsResults;\n      },\n      (error: any) => {\n        errorResponse = error.error;\n        this.sharedService.errorLog(errorResponse);\n      }\n    );\n  } */\n\n\n  like(postId) {\n    let errorResponse;\n    /* try {\n      await this.postService.likePost(postId);\n      this.loadPosts();\n    } catch (error: any) {\n      errorResponse = error.error;\n      this.sharedService.errorLog(errorResponse);\n    } */\n\n    this.postService.likePost(postId).subscribe(postResult => {//this.loadPosts();\n    }, error => {\n      errorResponse = error.error;\n      this.sharedService.errorLog(errorResponse);\n    });\n  }\n\n  dislike(postId) {\n    let errorResponse;\n    /* try {\n      await this.postService.dislikePost(postId);\n      this.loadPosts();\n    } catch (error: any) {\n      errorResponse = error.error;\n      this.sharedService.errorLog(errorResponse);\n    } */\n\n    this.postService.dislikePost(postId).subscribe(postResult => {//this.loadPosts();\n    }, error => {\n      errorResponse = error.error;\n      this.sharedService.errorLog(errorResponse);\n    });\n  }\n\n}\n\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.LocalStorageService), i0.ɵɵdirectiveInject(i3.SharedService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.HeaderMenusService), i0.ɵɵdirectiveInject(i6.Store));\n};\n\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 5,\n  vars: 3,\n  consts: [[2, \"text-align\", \"center\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\"], [1, \"container\"], [\"class\", \"badge\", 3, \"ngStyle\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"badge\", 3, \"ngStyle\"], [3, \"click\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"List All posts\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 0);\n      i0.ɵɵtemplate(3, HomeComponent_div_3_Template, 19, 11, \"div\", 1);\n      i0.ɵɵpipe(4, \"async\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(4, 1, ctx.posts));\n    }\n  },\n  directives: [i7.NgForOf, i7.NgIf, i7.NgStyle],\n  pipes: [i7.AsyncPipe, i8.FormatDatePipe],\n  styles: [\".card[_ngcontent-%COMP%] {\\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\\n  transition: 0.3s;\\n  width: 90%;\\n  margin-left: auto;\\n  margin-right: auto;\\n  margin-top: 10px;\\n  border-radius: 10px;\\n}\\n\\n.card[_ngcontent-%COMP%]:hover {\\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);\\n}\\n\\n.container[_ngcontent-%COMP%] {\\n  padding: 2px 16px;\\n}\\n\\n.badge[_ngcontent-%COMP%] {\\n  color: black;\\n  margin-right: 5px;\\n  margin-left: 5px;\\n  border-radius: 10px;\\n  padding: 5px 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWUuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSwwQ0FBQTtFQUNBLGdCQUFBO0VBQ0EsVUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0FBQ0Y7O0FBRUE7RUFDRSwyQ0FBQTtBQUNGOztBQUVBO0VBQ0UsaUJBQUE7QUFDRjs7QUFFQTtFQUNFLFlBQUE7RUFDQSxpQkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSxpQkFBQTtBQUNGIiwiZmlsZSI6ImhvbWUuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2FyZCB7XHJcbiAgYm94LXNoYWRvdzogMCA0cHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpO1xyXG4gIHRyYW5zaXRpb246IDAuM3M7XHJcbiAgd2lkdGg6IDkwJTtcclxuICBtYXJnaW4tbGVmdDogYXV0bztcclxuICBtYXJnaW4tcmlnaHQ6IGF1dG87XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG59XHJcblxyXG4uY2FyZDpob3ZlciB7XHJcbiAgYm94LXNoYWRvdzogMCA4cHggMTZweCAwIHJnYmEoMCwgMCwgMCwgMC4yKTtcclxufVxyXG5cclxuLmNvbnRhaW5lciB7XHJcbiAgcGFkZGluZzogMnB4IDE2cHg7XHJcbn1cclxuXHJcbi5iYWRnZSB7XHJcbiAgY29sb3I6IGJsYWNrO1xyXG4gIG1hcmdpbi1yaWdodDogNXB4O1xyXG4gIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICBwYWRkaW5nOiA1cHggMTBweDtcclxufVxyXG4iXX0= */\"]\n});","map":{"version":3,"sources":["/home/pascuord/Documentos/uoc/desarrolloFrontEndAvanzado/pec2/ejercicio3/ejercicio3DFA/src/app/shared/home/home.component.ts"],"names":["loadPosts","i0","i1","i2","i3","i4","i5","i6","i7","i8","_c0","a0","HomeComponent_div_3_span_3_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","category_r4","$implicit","ɵɵproperty","ɵɵpureFunction1","css_color","ɵɵadvance","ɵɵtextInterpolate1","title","HomeComponent_div_3_div_18_Template","_r7","ɵɵgetCurrentView","ɵɵlistener","HomeComponent_div_3_div_18_Template_button_click_1_listener","ɵɵrestoreView","post_r1","ɵɵnextContext","ctx_r5","like","postId","HomeComponent_div_3_div_18_Template_button_click_3_listener","ctx_r8","dislike","HomeComponent_div_3_Template","ɵɵtemplate","ɵɵpipe","ctx_r0","categories","description","num_likes","num_dislikes","ɵɵpipeBind2","publication_date","userAlias","showButtons","HomeComponent","constructor","postService","localStorageService","sharedService","router","headerMenusService","store","ngOnInit","select","subscribe","posts","dispatch","errorResponse","likePost","postResult","error","errorLog","dislikePost","ɵfac","HomeComponent_Factory","t","ɵɵdirectiveInject","PostService","LocalStorageService","SharedService","Router","HeaderMenusService","Store","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","HomeComponent_Template","ɵɵpipeBind1","directives","NgForOf","NgIf","NgStyle","pipes","AsyncPipe","FormatDatePipe","styles"],"mappings":"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","sourcesContent":["import { loadPosts } from \"src/app/posts/actions\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/post.service\";\nimport * as i2 from \"src/app/Services/local-storage.service\";\nimport * as i3 from \"src/app/Services/shared.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"src/app/Services/header-menus.service\";\nimport * as i6 from \"@ngrx/store\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"../../Pipes/format-date.pipe\";\nconst _c0 = function (a0) { return { \"background-color\": a0 }; };\nfunction HomeComponent_div_3_span_3_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const category_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(2, _c0, category_r4.css_color));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r4.title, \" \");\n} }\nfunction HomeComponent_div_3_div_18_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_3_div_18_Template_button_click_1_listener() { i0.ɵɵrestoreView(_r7); const post_r1 = i0.ɵɵnextContext().$implicit; const ctx_r5 = i0.ɵɵnextContext(); return ctx_r5.like(post_r1.postId); });\n    i0.ɵɵtext(2, \"Like\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_3_div_18_Template_button_click_3_listener() { i0.ɵɵrestoreView(_r7); const post_r1 = i0.ɵɵnextContext().$implicit; const ctx_r8 = i0.ɵɵnextContext(); return ctx_r8.dislike(post_r1.postId); });\n    i0.ɵɵtext(4, \"Dislike\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n} }\nfunction HomeComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"div\", 3);\n    i0.ɵɵelementStart(2, \"div\");\n    i0.ɵɵtemplate(3, HomeComponent_div_3_span_3_Template, 2, 4, \"span\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h4\");\n    i0.ɵɵelementStart(5, \"b\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"formatDate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"p\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(18, HomeComponent_div_3_div_18_Template, 5, 0, \"div\", 5);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const post_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", post_r1.categories);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Title: \", post_r1.title, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Description: \", post_r1.description, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Likes: \", post_r1.num_likes, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Dislikes: \", post_r1.num_dislikes, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Publication date: \", i0.ɵɵpipeBind2(15, 8, post_r1.publication_date, 3), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Published by: \", post_r1.userAlias, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.showButtons);\n} }\nexport class HomeComponent {\n    constructor(postService, localStorageService, sharedService, router, headerMenusService, store) {\n        this.postService = postService;\n        this.localStorageService = localStorageService;\n        this.sharedService = sharedService;\n        this.router = router;\n        this.headerMenusService = headerMenusService;\n        this.store = store;\n        this.showButtons = false;\n        //this.loadPosts();\n    }\n    ngOnInit() {\n        /* this.headerMenusService.headerManagement.subscribe(\n          (headerInfo: HeaderMenus) => {\n            if (headerInfo) {\n              this.showButtons = headerInfo.showAuthSection;\n            }\n          }\n        ); */\n        this.store.select(\"postsApp\").subscribe((posts) => { this.posts = posts.posts; });\n        this.store.dispatch(loadPosts());\n        //TODO<-----Falta comprobar la variable userid\n        /* this.store.select(\"auth\").subscribe((authResponse)=>{\n          const userId = authResponse.credentials.user_id;\n          console.log(\"UserId: \" + userId);\n        });\n    \n        this.store.select(\"posts\").subscribe((postsResponse) => {\n          this.posts = postsResponse.posts;\n        }); */\n    }\n    /* private loadPosts() {\n       let errorResponse: any;\n      const userId = this.localStorageService.get('user_id');\n      if (userId) {\n        this.showButtons = true;\n      }\n      \n      this.postService.getPosts().subscribe(\n        (postsResults) => {\n          this.posts = postsResults;\n        },\n        (error: any) => {\n          errorResponse = error.error;\n          this.sharedService.errorLog(errorResponse);\n        }\n      );\n    } */\n    like(postId) {\n        let errorResponse;\n        /* try {\n          await this.postService.likePost(postId);\n          this.loadPosts();\n        } catch (error: any) {\n          errorResponse = error.error;\n          this.sharedService.errorLog(errorResponse);\n        } */\n        this.postService.likePost(postId).subscribe((postResult) => {\n            //this.loadPosts();\n        }, (error) => {\n            errorResponse = error.error;\n            this.sharedService.errorLog(errorResponse);\n        });\n    }\n    dislike(postId) {\n        let errorResponse;\n        /* try {\n          await this.postService.dislikePost(postId);\n          this.loadPosts();\n        } catch (error: any) {\n          errorResponse = error.error;\n          this.sharedService.errorLog(errorResponse);\n        } */\n        this.postService.dislikePost(postId).subscribe((postResult) => {\n            //this.loadPosts();\n        }, (error) => {\n            errorResponse = error.error;\n            this.sharedService.errorLog(errorResponse);\n        });\n    }\n}\nHomeComponent.ɵfac = function HomeComponent_Factory(t) { return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.LocalStorageService), i0.ɵɵdirectiveInject(i3.SharedService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.HeaderMenusService), i0.ɵɵdirectiveInject(i6.Store)); };\nHomeComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: HomeComponent, selectors: [[\"app-home\"]], decls: 5, vars: 3, consts: [[2, \"text-align\", \"center\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\"], [1, \"container\"], [\"class\", \"badge\", 3, \"ngStyle\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"badge\", 3, \"ngStyle\"], [3, \"click\"]], template: function HomeComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"List All posts\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 0);\n        i0.ɵɵtemplate(3, HomeComponent_div_3_Template, 19, 11, \"div\", 1);\n        i0.ɵɵpipe(4, \"async\");\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(4, 1, ctx.posts));\n    } }, directives: [i7.NgForOf, i7.NgIf, i7.NgStyle], pipes: [i7.AsyncPipe, i8.FormatDatePipe], styles: [\".card[_ngcontent-%COMP%] {\\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\\n  transition: 0.3s;\\n  width: 90%;\\n  margin-left: auto;\\n  margin-right: auto;\\n  margin-top: 10px;\\n  border-radius: 10px;\\n}\\n\\n.card[_ngcontent-%COMP%]:hover {\\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);\\n}\\n\\n.container[_ngcontent-%COMP%] {\\n  padding: 2px 16px;\\n}\\n\\n.badge[_ngcontent-%COMP%] {\\n  color: black;\\n  margin-right: 5px;\\n  margin-left: 5px;\\n  border-radius: 10px;\\n  padding: 5px 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWUuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSwwQ0FBQTtFQUNBLGdCQUFBO0VBQ0EsVUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0FBQ0Y7O0FBRUE7RUFDRSwyQ0FBQTtBQUNGOztBQUVBO0VBQ0UsaUJBQUE7QUFDRjs7QUFFQTtFQUNFLFlBQUE7RUFDQSxpQkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSxpQkFBQTtBQUNGIiwiZmlsZSI6ImhvbWUuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2FyZCB7XHJcbiAgYm94LXNoYWRvdzogMCA0cHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpO1xyXG4gIHRyYW5zaXRpb246IDAuM3M7XHJcbiAgd2lkdGg6IDkwJTtcclxuICBtYXJnaW4tbGVmdDogYXV0bztcclxuICBtYXJnaW4tcmlnaHQ6IGF1dG87XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG59XHJcblxyXG4uY2FyZDpob3ZlciB7XHJcbiAgYm94LXNoYWRvdzogMCA4cHggMTZweCAwIHJnYmEoMCwgMCwgMCwgMC4yKTtcclxufVxyXG5cclxuLmNvbnRhaW5lciB7XHJcbiAgcGFkZGluZzogMnB4IDE2cHg7XHJcbn1cclxuXHJcbi5iYWRnZSB7XHJcbiAgY29sb3I6IGJsYWNrO1xyXG4gIG1hcmdpbi1yaWdodDogNXB4O1xyXG4gIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICBwYWRkaW5nOiA1cHggMTBweDtcclxufVxyXG4iXX0= */\"] });\n"]},"metadata":{},"sourceType":"module"}